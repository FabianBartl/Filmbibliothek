{% extends 'default.html' %}

{% set title = 'Film: "' + movie.title|e + '"' %}
{% set mainID = 'movie-details' %}

{% block main %}
	<div class="row">
		{% if movie.get('poster') %}
			<img class="poster" src="{{ movie.get('poster') | e }}">
		{% else %}
			<img class="poster" src="{{ url_for('static', filename='images/blank-poster.jpg') }}">
		{% endif %}
		<div class="short-details">
			<h2 class="title">
				{{ movie.title | e }}
			</h2>
			<div class="row">
				<ul class="row">
					{% if movie.get('year') %}
						<li class="year">
							{{ movie.get('year') | e }}
						</li>
					{% endif %}
					<li class="duration">
						{{ movie.get('duration')[0] | e }} h
						{{ movie.get('duration')[1] | e }} min
					</li>
				</ul>
				<ul class="row badges">
					{% for badge in ['age-rating', 'resolution'] %}
						{% if movie.get(badge) %}
							<li class="badge">{{ movie.get(badge) | e }}</li>
						{% endif %}
					{% endfor %}
				</ul>
			</div>
			<ul class="row actions">
				<li>
					<a class="button" onclick="playAsFullscreen('#movie-stream > video');">
						<i class="fa fa-play"></i>&ensp;Abspielen
					</a>
				</li>
			</ul>
			{% if movie.get('description') %}
				<div class="description">
					{{ movie.get('description') | e }}
				</div>
			{% endif %}
			<div class="short-credits">
				{% set credits = {'director': 'REGIE', 'author': 'AUTOR', 'studio': 'STUDIO', 'genre': 'GENRE'} %}
				{% for credit in credits %}
					{% if movie.get(credit) %}
						<div class="row">
							<div class="credit-name">
								{{ credits[credit] }}
							</div>
							<div class="credit-content">
								{% set names = movie.get(credit) %}
								{% if names is string %}
									{{ names | e }}
								{% else %}
									{{ ', '.join(names) | e }}
								{% endif %}
							</div>
						</div>
					{% endif %}
				{% endfor %}
			</div>
		</div>
	</div>

	<div id="movie-stream">
		<video controls>
			<source src="stream/" type="video/mp4">
			<!-- <track src="subtitles/de/" kind="subtitles" srclang="de" label="Deutsch"> -->
			<!-- <track src="subtitles/en/" kind="subtitles" srclang="en" label="Englisch"> -->
		</video>
	</div>
{% endblock %}